!function(){"use strict";window.__BUILD_CONFIG__={API_URL:"http://localhost:3000"}}(),angular.module("go.blog",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","ui.bootstrap"]).constant("buildconfig",function(){return __BUILD_CONFIG__}()).config(["$locationProvider","apiProvider","buildconfig",function(a,b,c){a.html5Mode(!0).hashPrefix("!"),b.setBaseUrl(c.API_URL)}]),angular.module("go.blog").constant("PAGE_SIZE",6).constant("subdomain",function(){var a=window.location.host,b=a.split("."),c=b.length;if(b.length<=2)return"";var d=b.slice(0,c-2).join(".");return d}()).config(["subdomain","$stateProvider","$urlRouterProvider",function(a,b,c){var d=a?"user":"root";console.log("subdomain: "+a),console.log("mode: "+d),c.otherwise("/"),b.state("main",{"abstract":!0,url:"",templateUrl:"views/main.html"}).state("main.home",{url:"/",templateUrl:"views/home.html",controller:"home",resolve:{articles:["api","PAGE_SIZE",function(a,b){return a.get("articles?pagesize="+b)}]}}).state("main.article",{"abstract":!0,template:'<div data-ui-view=""></div>',url:"/articles/:article",resolve:{article:["api","$stateParams",function(a,b){return a.get("articles/"+b.article)}]}}).state("main.article.view",{url:"",templateUrl:"views/article.view.html",controller:"article.view"}).state("main.article.edit",{url:"/edit",templateUrl:"views/article.edit.html",controller:"article.edit"})}]),angular.module("go.blog").provider("api",function(){var a="";this.setBaseUrl=function(b){a=b,"/"!==a[a.length-1]&&(a+="/")},this.$get=["$http","$window","$q",function(b,c,d){function e(a){return a=a||{},c.sessionStorage.token&&(a.headers=a.headers||{},a.headers.Authorization="Bearer "+c.sessionStorage.token),a}function f(a){return 401===a.status&&c.sessionStorage.token&&delete c.sessionStorage.token,d.reject(a)}return{get:function(c,d){return b.get(a+c,e(d)).then(function(a){return a.data},f)},del:function(c,d){return b["delete"](a+c,e(d)).then(function(a){return a.data},f)},post:function(c,d,g){return b.post(a+c,d,e(g)).then(function(a){return a.data},f)},put:function(c,d,g){return b.put(a+c,d,e(g)).then(function(a){return a.data},f)}}}]}),angular.module("go.blog").controller("home",["$http","$window","$scope","$state","$log","$q","api","articles",function(a,b,c,d,e,f,g,h){c.articles=h}]),angular.module("go.blog").controller("article.view",["$http","$window","$scope","$state","$log","$q","article",function(a,b,c,d,e,f,g){c.article=g}]),angular.module("go.blog").controller("article.edit",["$http","$window","$scope","$state","$log","$q","api","article",function(a,b,c,d,e,f,g,h){c.article=h,c.update=function(a){g.put("articles/"+a.id,a).then(function(){d.go("^.view")})}}]);